document.addEventListener("DOMContentLoaded",()=>{let n=FS_SEO_Internal_Link_Juicer.ajax_url,c=FS_SEO_Internal_Link_Juicer.nonce,a=(document.body.addEventListener("click",e=>{let r=e.target.closest(".toggle-link");if(r){e.preventDefault();var e=r.dataset.postId,a=r.dataset.keyphrase,o=r.dataset.url;let t=r.dataset.action;console.log("AJAX parameters:",{postId:e,keyphrase:a,url:o,action:t}),fetch(n,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},body:new URLSearchParams({action:"fs_toggle_link",post_id:e,keyphrase:a,url:o,toggle_action:t,nonce:c})}).then(e=>e.json()).then(e=>{e.success?"add"===t?(r.textContent="Remove Link",r.dataset.action="remove",r.style.color="red"):(r.textContent="Add Link",r.dataset.action="add",r.style.color="green"):(console.error("AJAX response error:",e.data||"Unknown error"),alert(e.data||"Error occurred."))}).catch(e=>{console.error("AJAX fetch error:",e),alert("An error occurred while trying to toggle the link.")})}}),document.querySelectorAll(".nav-tab")),o=document.querySelectorAll(".post-type-tab");if(0<a.length){let r=e=>{var t=document.querySelector(e.getAttribute("href"));t&&(o.forEach(e=>e.style.display="none"),a.forEach(e=>e.classList.remove("nav-tab-active")),e.classList.add("nav-tab-active"),t.style.display="block")};a.forEach(t=>{t.addEventListener("click",e=>{e.preventDefault(),r(t)})}),r(a[0])}});